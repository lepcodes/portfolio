---
import CopyIcon from "../icons/CopyIcon.astro";
import XIcon from "../icons/XIcon.astro";
import DownloadIcon from "../icons/DownloadIcon.astro";

const contacts = [
  {
    name: "LinkedIn",
    url: "https://www.linkedin.com/in/luispreciado"
  },
  {
    name: "GitHub",
    url: "https://github.com/lepcodes"
  },
  {
    name: "Mail",
    url: "mailto:luispre99@gmail.com"
  },
  {
    name: "Phone",
    url: "tel:+5715985634"
  }
];
---
<div>
  <button id="pop-over-toggle" class="flex items-center rounded-full pulse">
    <div id="profile-picture" class="text-md top-0 m-0 border dark:border-white border-gray-700 rounded-full overflow-hidden hover:cursor-pointer hover:border-teal-700 hover:scale-120 transition-all duration-200">
      <img src="/src/assets/ProfilePicture.png" alt="Logo" class="h-8 w-8 md:h-10 md:w-10 object-cover  hover:scale-107 transition-all duration-200"/>
    </div>
    <div id="close-button" class="hidden rounded-full overflow-hidden p-1">
      <XIcon class="h-8 w-8 weight-bold text-teal-600 dark:text-teal-600 hover:cursor-pointer dark:hover:text-gray-200 hover:text-gray-600"/>
    </div>
  </button>

  <div id="pop-over" class="flex flex-col absolute top-[90%] left-10 items-center gap-4 border border-gray-400 dark:border-gray-700 shadow-lg dark:shadow-black rounded-lg py-4 px-8 bg-white dark:bg-[#18262aad] overflow-hidden pop-over-out">
    <div class="flex flex-col items-center gap-2 m-2 mt-4 ">
      <img src="/src/assets/ProfilePicture.png" alt="Profile" class="rounded-full self-center w-32 h-32 border-2"/>
      <h1 class="text-xl font-extrabold dark:text-gray-200 mt-1">Luis Preciado</h1>
      <p class="text-sm dark:text-gray-400">AI and Robotics Engineer</p>
    </div>
    <div class="grid grid-cols-2 gap-y-4 gap-x-3 text-sm w-fit">
      {contacts.map((contact) => (
        <div class="flex items-center h-8 border border-gray-400 rounded-lg overflow-hidden">
          <a 
            href={contact.url} 
            class="flex items-center justify-center h-full px-2 dark:text-gray-300 hover:text-teal-600 dark:hover:text-teal-300 bg-white dark:bg-[#00000040] hover:bg-teal-50 dark:hover:bg-[#568e8b3d] transition-all duration-200 flex-1"
          >
            {contact.name}
          </a>
          <button class="group border h-full w-fit px-1.5 py-1 bg-[#063b3dd1] dark:bg-white font-bold text-white dark:text-black border-transparent hover:cursor-pointer transition-all duration-200">
            <CopyIcon class="h-4 w-4 dark:bg-white group-hover:text-teal-300 dark:group-hover:text-teal-600 group-hover:scale-110"/>
          </button>
        </div>
      ))}
    </div>
    <button class="flex items-center self-center border border-gray-700 rounded-lg w-fit px-2 py-1 text-sm bg-white font-bold text-black mt-2 hover:cursor-pointer hover:text-teal-600 transition-all duration-100 mb-4 pulse-glow hover:scale-105 hover:shadow-lg shadow-sm dark:shadow-black group">
      <span>Resume</span><DownloadIcon class="h-4 w-4 ml-1 dark:group-hover:text-teal-600 dark:text-black"/>
    </button>
  </div>
</div>

<script>
  const popOverToggle = document.getElementById('pop-over-toggle');
  const profilePicture = document.getElementById('profile-picture');
  const closeButton = document.getElementById('close-button');

  const popOver = document.getElementById('pop-over');
  popOverToggle?.addEventListener('click', () => {
    popOver?.classList.toggle('pop-over-in');
    popOver?.classList.toggle('pop-over-out');
    popOverToggle?.classList.toggle('pulse');
    profilePicture?.classList.toggle('hidden');
    closeButton?.classList.toggle('hidden');
  });
</script>